<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>(Pairwise) comparisons between predictions (marginal effects) — test_predictions • ggeffects</title><!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="(Pairwise) comparisons between predictions (marginal effects) — test_predictions"><meta name="description" content='Function to test differences of adjusted predictions for
statistical significance. This is usually called contrasts or (pairwise)
comparisons, or "marginal effects". hypothesis_test() is an alias.'><meta property="og:description" content='Function to test differences of adjusted predictions for
statistical significance. This is usually called contrasts or (pairwise)
comparisons, or "marginal effects". hypothesis_test() is an alias.'><meta property="og:image" content="https://strengejacke.github.io/ggeffects/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggeffects</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-introductions" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Introductions</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-introductions"><li><a class="dropdown-item" href="../articles/ggeffects.html">Adjusted predictions of regression models</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_effectsatvalues.html">Adjusted predictions at specific values</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_randomeffects.html">Adjusted predictions for mixed models</a></li>
    <li><a class="dropdown-item" href="../articles/practical_robustestimation.html">(Cluster) Robust standard errors</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-interpretation" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Interpretation</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-interpretation"><li><a class="dropdown-item" href="../articles/introduction_comparisons_1.html">Contrasts and pairwise comparisons</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_comparisons_2.html">Slopes, floodlight and spotlight analysis</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_comparisons_3.html">Contrasts and pairwise comparisons for GLM</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_comparisons_4.html">Contrasts and pairwise comparisons for Zero-Inflation Models</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_comparisons_5.html">Using marginaleffects or emmeans for comparisons</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_partial_residuals.html">Adding partial residuals to effects plots</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-plotting-and-printing" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Plotting and Printing</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-plotting-and-printing"><li><a class="dropdown-item" href="../articles/introduction_plotmethod.html">Plotting adjusted predictions</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_plotcustomize.html">Customize plot appearance</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_print.html">Customize table appearance</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-case-studies" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Case Studies</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-case-studies"><li><a class="dropdown-item" href="../articles/practical_glm_workflow.html">Simple workflow using logistic regression</a></li>
    <li><a class="dropdown-item" href="../articles/practical_logisticmixedmodel.html">Logistic mixed effects Model with interaction term</a></li>
    <li><a class="dropdown-item" href="../articles/practical_intersectionality.html">Intersectionality analysis using the MAIHDA framework</a></li>
    <li><a class="dropdown-item" href="../articles/practical_marginaleffects_pkg.html">Comparison of ggeffects and marginaleffects</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-technical-details" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Technical Details</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-technical-details"><li><a class="dropdown-item" href="../articles/technical_get_predictions.html">Adding own class-methods to ggeffects</a></li>
    <li><a class="dropdown-item" href="../articles/technical_differencepredictemmeans.html">Difference between marginalization methods</a></li>
    <li><a class="dropdown-item" href="../articles/technical_stata.html">Different Output between Stata and ggeffects</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/strengejacke/ggeffects/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>(Pairwise) comparisons between predictions (marginal effects)</h1>
      <small class="dont-index">Source: <a href="https://github.com/strengejacke/ggeffects/blob/master/R/test_predictions.R" class="external-link"><code>R/test_predictions.R</code></a></small>
      <div class="d-none name"><code>test_predictions.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Function to test differences of adjusted predictions for
statistical significance. This is usually called contrasts or (pairwise)
comparisons, or "marginal effects". <code>hypothesis_test()</code> is an alias.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">test_predictions</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">hypothesis_test</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">test_predictions</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  terms <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  test <span class="op">=</span> <span class="st">"pairwise"</span>,</span>
<span>  test_args <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  equivalence <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  scale <span class="op">=</span> <span class="st">"response"</span>,</span>
<span>  p_adjust <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  df <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ci_level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  collapse_levels <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  margin <span class="op">=</span> <span class="st">"mean_reference"</span>,</span>
<span>  condition <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  engine <span class="op">=</span> <span class="st">"marginaleffects"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'ggeffects'</span></span>
<span><span class="fu">test_predictions</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  test <span class="op">=</span> <span class="st">"pairwise"</span>,</span>
<span>  equivalence <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  scale <span class="op">=</span> <span class="st">"response"</span>,</span>
<span>  p_adjust <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  df <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  collapse_levels <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  engine <span class="op">=</span> <span class="st">"marginaleffects"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>A fitted model object, or an object of class <code>ggeffects</code>. If
<code>object</code> is of class <code>ggeffects</code>, arguments <code>terms</code>, <code>margin</code> and <code>ci_level</code>
are taken from the <code>ggeffects</code> object and don't need to be specified.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed down to <code><a href="new_data.html">data_grid()</a></code> when creating the reference
grid and to <code><a href="https://rdrr.io/pkg/marginaleffects/man/predictions.html" class="external-link">marginaleffects::predictions()</a></code> resp. <code><a href="https://rdrr.io/pkg/marginaleffects/man/slopes.html" class="external-link">marginaleffects::slopes()</a></code>.
For instance, arguments <code>type</code> or <code>transform</code> can be used to back-transform
comparisons and contrasts to different scales. <code>vcov</code> can be used to
calculate heteroscedasticity-consistent standard errors for contrasts.
See examples at the bottom of
<a href="https://strengejacke.github.io/ggeffects/articles/introduction_comparisons_1.html">this vignette</a>
for further details.</p>
<p>To define a heteroscedasticity-consistent variance-covariance matrix, you can
either use the same arguments as for <code><a href="predict_response.html">predict_response()</a></code> etc., namely <code>vcov</code>
and <code>vcov_args</code>. These are then transformed into a matrix and passed down to
the <code>vcov</code> argument in <strong>marginaleffects</strong>. Or you directly use the <code>vcov</code>
argument. See <code><a href="https://rdrr.io/pkg/marginaleffects/man/slopes.html" class="external-link">?marginaleffects::slopes</a></code> for further details.</p></dd>


<dt id="arg-terms">terms<a class="anchor" aria-label="anchor" href="#arg-terms"></a></dt>
<dd><p>If <code>object</code> is an object of class <code>ggeffects</code>, the same <code>terms</code>
argument is used as for the predictions, i.e. <code>terms</code> can be ignored. Else,
if <code>object</code> is a model object, <code>terms</code> must be a character vector with the
names of the focal terms from <code>object</code>, for which contrasts or comparisons
should be displayed. At least one term is required, maximum length is three
terms. If the first focal term is numeric, contrasts or comparisons for the
<em>slopes</em> of this numeric predictor are computed (possibly grouped by the
levels of further categorical focal predictors).</p></dd>


<dt id="arg-by">by<a class="anchor" aria-label="anchor" href="#arg-by"></a></dt>
<dd><p>Character vector specifying the names of predictors to condition on.
Hypothesis test is then carried out for focal terms by each level of <code>by</code>
variables. This is useful especially for interaction terms, where we want
to test the interaction within "groups". <code>by</code> is only relevant for
categorical predictors.</p></dd>


<dt id="arg-test">test<a class="anchor" aria-label="anchor" href="#arg-test"></a></dt>
<dd><p>Hypothesis to test, defined as character string. Can be one of:</p><ul><li><p><code>"pairwise"</code> (default), to test pairwise comparisons.</p></li>
<li><p><code>"trend"</code> (or <code>"slope"</code>) to test for the linear trend/slope of (usually)
continuous predictors. These options are just aliases for setting
<code>trend = NULL</code>.</p></li>
<li><p><code>"contrast"</code> to test simple contrasts (i.e. each level is tested against
the average over <em>all</em> levels).</p></li>
<li><p><code>"exclude"</code> to test simple contrasts (i.e. each level is tested against
the average over <em>all other</em> levels, excluding the contrast that is being
tested).</p></li>
<li><p><code>"interaction"</code> to test interaction contrasts (difference-in-difference
contrasts). More flexible interaction contrasts can be calcualted using
the <code>test_args</code> argument.</p></li>
<li><p><code>"consecutive"</code> to test contrasts between consecutive levels of a predictor.</p></li>
<li><p><code>"polynomial"</code> to test orthogonal polynomial contrasts, assuming
equally-spaced factor levels.</p></li>
<li><p>A character string with a custom hypothesis, e.g. <code>"b2 = b1"</code>. This would
test if the second level of a predictor is different from the first level.
Custom hypotheses are very flexible. It is also possible to test interaction
contrasts (difference-in-difference contrasts) with custom hypotheses, e.g.
<code>"(b2 - b1) = (b4 - b3)"</code>. See also section <em>Introduction into contrasts
and pairwise comparisons</em>.</p></li>
<li><p>A data frame with custom contrasts. See 'Examples'.</p></li>
<li><p><code>NULL</code>, in which case simple contrasts are computed.</p></li>
</ul><p>Technical details about the packages used as back-end to calculate contrasts
and pairwise comparisons are provided in the section <em>Packages used as back-end
to calculate contrasts and pairwise comparisons</em> below.</p></dd>


<dt id="arg-test-args">test_args<a class="anchor" aria-label="anchor" href="#arg-test-args"></a></dt>
<dd><p>Optional arguments passed to <code>test</code>, typically provided as
named list. Only applies to those options that use the <strong>emmeans</strong> package
as backend, e.g. if <code>test = "interaction"</code>, <code>test_args</code> will be passed to
<code>emmeans::contrast(interaction = test_args)</code>. For other <em>emmeans</em> options
(like <code>"cotrast"</code>, <code>"exclude"</code>, <code>"consecutive"</code> and so on), <code>test_args</code> will
be passed to the <code>option</code> argument in <code><a href="https://rvlenth.github.io/emmeans/reference/contrast.html" class="external-link">emmeans::contrast()</a></code>.</p></dd>


<dt id="arg-equivalence">equivalence<a class="anchor" aria-label="anchor" href="#arg-equivalence"></a></dt>
<dd><p>ROPE's lower and higher bounds. Should be <code>"default"</code> or
a vector of length two (e.g., <code>c(-0.1, 0.1)</code>). If <code>"default"</code>,
<code><a href="https://easystats.github.io/bayestestR/reference/rope_range.html" class="external-link">bayestestR::rope_range()</a></code> is used. Instead of using the <code>equivalence</code>
argument, it is also possible to call the <code>equivalence_test()</code> method
directly. This requires the <strong>parameters</strong> package to be loaded. When
using <code>equivalence_test()</code>, two more columns with information about the
ROPE coverage and decision on H0 are added. Furthermore, it is possible
to <code><a href="plot.html">plot()</a></code> the results from <code>equivalence_test()</code>. See
<code><a href="https://easystats.github.io/bayestestR/reference/equivalence_test.html" class="external-link">bayestestR::equivalence_test()</a></code> resp. <code><a href="https://easystats.github.io/parameters/reference/equivalence_test.lm.html" class="external-link">parameters::equivalence_test.lm()</a></code>
for details.</p></dd>


<dt id="arg-scale">scale<a class="anchor" aria-label="anchor" href="#arg-scale"></a></dt>
<dd><p>Character string, indicating the scale on which the contrasts
or comparisons are represented. Can be one of:</p><ul><li><p><code>"response"</code> (default), which would return contrasts on the response
scale (e.g. for logistic regression, as probabilities);</p></li>
<li><p><code>"link"</code> to return contrasts on scale of the linear predictors
(e.g. for logistic regression, as log-odds);</p></li>
<li><p><code>"probability"</code> (or <code>"probs"</code>) returns contrasts on the probability scale,
which is required for some model classes, like <code><a href="https://rdrr.io/pkg/MASS/man/polr.html" class="external-link">MASS::polr()</a></code>;</p></li>
<li><p><code>"oddsratios"</code> to return contrasts on the odds ratio scale (only applies
to logistic regression models);</p></li>
<li><p><code>"irr"</code> to return contrasts on the odds ratio scale (only applies to
count models);</p></li>
<li><p>or a transformation function like <code>"exp"</code> or <code>"log"</code>, to return transformed
(exponentiated respectively logarithmic) contrasts; note that these
transformations are applied to the <em>response scale</em>.</p></li>
</ul><p><strong>Note:</strong> If the <code>scale</code> argument is not supported by the provided <code>object</code>,
it is automatically changed to a supported scale-type (a message is printed
when <code>verbose = TRUE</code>).</p></dd>


<dt id="arg-p-adjust">p_adjust<a class="anchor" aria-label="anchor" href="#arg-p-adjust"></a></dt>
<dd><p>Character vector, if not <code>NULL</code>, indicates the method to
adjust p-values. See <code><a href="https://rdrr.io/r/stats/p.adjust.html" class="external-link">stats::p.adjust()</a></code> or <code><a href="https://rdrr.io/r/stats/p.adjust.html" class="external-link">stats::p.adjust.methods</a></code>
for details. Further possible adjustment methods are <code>"tukey"</code> or <code>"sidak"</code>,
and for <code><a href="johnson_neyman.html">johnson_neyman()</a></code>, <code>"fdr"</code> (or <code>"bh"</code>) and <code>"esarey"</code> (or its
short-cut <code>"es"</code>) are available options. Some caution is necessary when
adjusting p-value for multiple comparisons. See also section <em>P-value adjustment</em>
below.</p></dd>


<dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>Degrees of freedom that will be used to compute the p-values and
confidence intervals. If <code>NULL</code>, degrees of freedom will be extracted from
the model using <code><a href="https://easystats.github.io/insight/reference/get_df.html" class="external-link">insight::get_df()</a></code> with <code>type = "wald"</code>.</p></dd>


<dt id="arg-ci-level">ci_level<a class="anchor" aria-label="anchor" href="#arg-ci-level"></a></dt>
<dd><p>Numeric, the level of the confidence intervals. If <code>object</code>
is an object of class <code>ggeffects</code>, the same <code>ci_level</code> argument is used as
for the predictions, i.e. <code>ci_level</code> can be ignored.</p></dd>


<dt id="arg-collapse-levels">collapse_levels<a class="anchor" aria-label="anchor" href="#arg-collapse-levels"></a></dt>
<dd><p>Logical, if <code>TRUE</code>, term labels that refer to identical
levels are no longer separated by "-", but instead collapsed into a unique
term label (e.g., <code>"level a-level a"</code> becomes <code>"level a"</code>). See 'Examples'.</p></dd>


<dt id="arg-margin">margin<a class="anchor" aria-label="anchor" href="#arg-margin"></a></dt>
<dd><p>Character string, indicates the method how to marginalize over
non-focal terms. See <code><a href="predict_response.html">predict_response()</a></code> for details. If <code>object</code> is an
object of class <code>ggeffects</code>, the same <code>margin</code> argument is used as for the
predictions, i.e. <code>margin</code> can be ignored.</p></dd>


<dt id="arg-condition">condition<a class="anchor" aria-label="anchor" href="#arg-condition"></a></dt>
<dd><p>Named character vector, which indicates covariates that
should be held constant at specific values, for instance
<code>condition = c(covariate1 = 20, covariate2 = 5)</code>.</p></dd>


<dt id="arg-engine">engine<a class="anchor" aria-label="anchor" href="#arg-engine"></a></dt>
<dd><p>Character string, indicates the package to use for computing
contrasts and comparisons. Usually, this argument can be ignored, unless you
want to explicitly use another package than <em>marginaleffects</em> to calculate
contrasts and pairwise comparisons. <code>engine</code> can be either <code>"marginaleffects"</code>
(default) or <code>"emmeans"</code>. The latter is useful when the <strong>marginaleffects</strong>
package is not available, or when the <strong>emmeans</strong> package is preferred. Note
that using <strong>emmeans</strong> as back-end is currently not as feature rich as the default
(<strong>marginaleffects</strong>) and still in development. Setting <code>engine = "emmeans"</code>
provides some additional test options: <code>"interaction"</code> to calculate interaction
contrasts, <code>"consecutive"</code> to calculate contrasts between consecutive levels of a
predictor, or a data frame with custom contrasts (see also <code>test</code>). There is
an experimental option as well, <code>engine = "ggeffects"</code>. However, this is
currently work-in-progress and offers much less options as the default engine,
<code>"marginaleffects"</code>. It can be faster in some cases, though, and works for
comparing predicted random effects in mixed models, or predicted probabilities
of the zero-inflation component. If the <strong>marginaleffects</strong> package is not
installed, the <strong>emmeans</strong> package is used automatically. If this package is
not installed as well, <code>engine = "ggeffects"</code> is used.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Toggle messages and warnings.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame containing predictions (e.g. for <code>test = NULL</code>),
contrasts or pairwise comparisons of adjusted predictions or estimated
marginal means.</p>
    </div>
    <div class="section level2">
    <h2 id="introduction-into-contrasts-and-pairwise-comparisons">Introduction into contrasts and pairwise comparisons<a class="anchor" aria-label="anchor" href="#introduction-into-contrasts-and-pairwise-comparisons"></a></h2>



<p>There are many ways to test contrasts or pairwise comparisons. A
detailed introduction with many (visual) examples is shown in
<a href="https://strengejacke.github.io/ggeffects/articles/introduction_comparisons_1.html">this vignette</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="simple-workflow-for-pairwise-comparisons">Simple workflow for pairwise comparisons<a class="anchor" aria-label="anchor" href="#simple-workflow-for-pairwise-comparisons"></a></h2>



<p>A simple workflow includes calculating adjusted predictions and passing the
results directly to <code>test_predictions()</code>, e.g.:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># 1. fit your model</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> hp <span class="sc">+</span> wt <span class="sc">+</span> am, <span class="at">data =</span> mtcars)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co"># 2. calculate adjusted predictions</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>pr <span class="ot">&lt;-</span> <span class="fu">predict_response</span>(model, <span class="st">"am"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>pr</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co"># 3. test pairwise comparisons</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="fu">test_predictions</span>(pr)</span></code></pre><p></p></div>
<p>See also <a href="https://strengejacke.github.io/ggeffects/articles/practical_glm_workflow.html">this vignette</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="packages-used-as-back-end-to-calculate-contrasts-and-pairwise-comparisons">Packages used as back-end to calculate contrasts and pairwise comparisons<a class="anchor" aria-label="anchor" href="#packages-used-as-back-end-to-calculate-contrasts-and-pairwise-comparisons"></a></h2>



<p>The <code>test</code> argument is used to define which kind of contrast or comparison
should be calculated. The default is to use the <strong>marginaleffects</strong> package.
Here are some technical details about the packages used as back-end. When
<code>test</code> is...</p><ul><li><p><code>"pairwise"</code> (default), pairwise comparisons are based on the <strong>marginaleffects</strong>
package.</p></li>
<li><p><code>"trend"</code> or <code>"slope"</code> also uses the <strong>marginaleffects</strong> package.</p></li>
<li><p><code>"contrast"</code> uses the <strong>emmeans</strong> package, i.e. <code>emmeans::contrast(method = "eff")</code>
is called.</p></li>
<li><p><code>"exclude"</code> relies on the <strong>emmeans</strong> package, i.e. <code>emmeans::contrast(method = "del.eff")</code>
is called.</p></li>
<li><p><code>"polynomial"</code> relies on the <strong>emmeans</strong> package, i.e. <code>emmeans::contrast(method = "poly")</code>
is called.</p></li>
<li><p><code>"interaction"</code> uses the <strong>emmeans</strong> package, i.e. <code>emmeans::contrast(interaction = ...)</code>
is called.</p></li>
<li><p><code>"consecutive"</code> also relies on the <strong>emmeans</strong> package, i.e.
<code>emmeans::contrast(method = "consec")</code> is called.</p></li>
<li><p>a character string with a custom hypothesis, the <strong>marginaleffects</strong>
package is used.</p></li>
<li><p>a data frame with custom contrasts, <strong>emmeans</strong> is used again.</p></li>
<li><p><code>NULL</code> calls functions from the <strong>marginaleffects</strong> package with
<code>hypothesis = NULL</code>.</p></li>
<li><p>If all focal terms are only present as random effects in a mixed model,
or if predicted probabilities for the zero-inflation component of a model
should be tested, functions from the <strong>ggeffects</strong> package are used. There
is an example for pairwise comparisons of random effects in
<a href="https://strengejacke.github.io/ggeffects/articles/practical_intersectionality.html">this vignette</a>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="p-value-adjustment-for-multiple-comparisons">P-value adjustment for multiple comparisons<a class="anchor" aria-label="anchor" href="#p-value-adjustment-for-multiple-comparisons"></a></h2>



<p>Note that p-value adjustment for methods supported by <code><a href="https://rdrr.io/r/stats/p.adjust.html" class="external-link">p.adjust()</a></code> (see also
<code>p.adjust.methods</code>), each row is considered as one set of comparisons, no
matter which <code>test</code> was specified. That is, for instance, when <code>test_predictions()</code>
returns eight rows of predictions (when <code>test = NULL</code>), and <code>p_adjust = "bonferroni"</code>,
the p-values are adjusted in the same way as if we had a test of pairwise
comparisons (<code>test = "pairwise"</code>) where eight rows of comparisons are
returned. For methods <code>"tukey"</code> or <code>"sidak"</code>, a rank adjustment is done
based on the number of combinations of levels from the focal predictors
in <code>terms</code>. Thus, the latter two methods may be useful for certain tests
only, in particular pairwise comparisons.</p>
<p>For <code><a href="johnson_neyman.html">johnson_neyman()</a></code>, the only available adjustment methods are <code>"fdr"</code>
(or <code>"bh"</code>) (<em>Benjamini &amp; Hochberg (1995)</em>) and <code>"esarey"</code> (or <code>"es"</code>)
(<em>Esarey and Sumner 2017</em>). These usually return similar results. The major
difference is that <code>"fdr"</code> can be slightly faster and more stable in edge
cases, however, confidence intervals are not updated. Only the p-values are
adjusted. <code>"esarey"</code> is slower, but confidence intervals are updated as well.</p>
    </div>
    <div class="section level2">
    <h2 id="global-options-to-choose-package-for-calculating-comparisons">Global options to choose package for calculating comparisons<a class="anchor" aria-label="anchor" href="#global-options-to-choose-package-for-calculating-comparisons"></a></h2>



<p><code>ggeffects_test_engine</code> can be used as option to either use the <strong>marginaleffects</strong>
package for computing contrasts and comparisons (default), or the <strong>emmeans</strong>
package (e.g. <code>options(ggeffects_test_engine = "emmeans")</code>). The latter is
useful when the <strong>marginaleffects</strong> package is not available, or when the
<strong>emmeans</strong> package is preferred. You can also provide the engine directly, e.g.
<code>test_predictions(..., engine = "emmeans")</code>. Note that using <strong>emmeans</strong> as
backend is currently not as feature rich as the default (<strong>marginaleffects</strong>)
and still in development.</p>
<p>If <code>engine = "emmeans"</code>, the <code>test</code> argument can also be <code>"interaction"</code>
to calculate interaction contrasts (difference-in-difference contrasts),
<code>"consecutive"</code> to calculate contrasts between consecutive levels of a predictor,
or a data frame with custom contrasts. If <code>test</code> is one of the latter options,
and <code>engine</code> is not specified, the <code>engine</code> is automatically set to <code>"emmeans"</code>.
Additionally, the <code>test_args</code> argument can be used to specify further options
for those contrasts. See 'Examples' and documentation of <code>test_args</code>.</p>
<p>If the <strong>marginaleffects</strong> package is not installed, the <strong>emmeans</strong> package is
used automatically. If this package is not installed as well,
<code>engine = "ggeffects"</code> is used.</p>
    </div>
    <div class="section level2">
    <h2 id="global-options-to-customize-tables-when-printing">Global Options to Customize Tables when Printing<a class="anchor" aria-label="anchor" href="#global-options-to-customize-tables-when-printing"></a></h2>


<p>The <code>verbose</code> argument can be used to display or silence messages and
warnings. Furthermore, <code><a href="https://rdrr.io/r/base/options.html" class="external-link">options()</a></code> can be used to set defaults for the
<code><a href="print.html">print()</a></code> and <code><a href="https://easystats.github.io/insight/reference/display.html" class="external-link">print_html()</a></code> method. The following options are available,
which can simply be run in the console:</p><ul><li><p><code>ggeffects_ci_brackets</code>: Define a character vector of length two, indicating
the opening and closing parentheses that encompass the confidence intervals
values, e.g. <code>options(ggeffects_ci_brackets = c("[", "]"))</code>.</p></li>
<li><p><code>ggeffects_collapse_ci</code>: Logical, if <code>TRUE</code>, the columns with predicted
values (or contrasts) and confidence intervals are collapsed into one
column, e.g. <code>options(ggeffects_collapse_ci = TRUE)</code>.</p></li>
<li><p><code>ggeffects_collapse_p</code>: Logical, if <code>TRUE</code>, the columns with predicted
values (or contrasts) and p-values are collapsed into one column, e.g.
<code>options(ggeffects_collapse_p = TRUE)</code>. Note that p-values are replaced
by asterisk-symbols (stars) or empty strings when <code>ggeffects_collapse_p = TRUE</code>,
depending on the significance level.</p></li>
<li><p><code>ggeffects_collapse_tables</code>: Logical, if <code>TRUE</code>, multiple tables for
subgroups are combined into one table. Only works when there is more than
one focal term, e.g. <code>options(ggeffects_collapse_tables = TRUE)</code>.</p></li>
<li><p><code>ggeffects_output_format</code>: String, either <code>"text"</code>, <code>"markdown"</code> or <code>"html"</code>.
Defines the default output format from <code><a href="predict_response.html">predict_response()</a></code>. If <code>"html"</code>, a
formatted HTML table is created and printed to the view pane. <code>"markdown"</code>
creates a markdown-formatted table inside Rmarkdown documents, and prints
a text-format table to the console when used interactively. If <code>"text"</code> or
<code>NULL</code>, a formatted table is printed to the console, e.g.
<code>options(ggeffects_output_format = "html")</code>.</p></li>
<li><p><code>ggeffects_html_engine</code>: String, either <code>"tt"</code> or <code>"gt"</code>. Defines the default
engine to use for printing HTML tables. If <code>"tt"</code>, the <em>tinytable</em> package
is used, if <code>"gt"</code>, the <em>gt</em> package is used, e.g.
<code>options(ggeffects_html_engine = "gt")</code>.</p></li>
</ul><p>Use <code>options(&lt;option_name&gt; = NULL)</code> to remove the option.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Esarey, J., &amp; Sumner, J. L. (2017). Marginal effects in interaction models:
Determining and controlling the false positive rate. Comparative Political
Studies, 1–33. Advance online publication. doi: 10.1177/0010414017730080</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>There is also an <code>equivalence_test()</code> method in the <strong>parameters</strong>
package (<code><a href="https://easystats.github.io/parameters/reference/equivalence_test.lm.html" class="external-link">parameters::equivalence_test.lm()</a></code>), which can be used to
test contrasts or comparisons for practical equivalence. This method also
has a <code><a href="plot.html">plot()</a></code> method, hence it is possible to do something like:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(parameters)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">predict_response</span>(model, focal_terms) <span class="sc">|&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>  <span class="fu">equivalence_test</span>() <span class="sc">|&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code></pre><p></p></div></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># requireNamespace("marginaleffects") &amp;&amp; requireNamespace("parameters") &amp;&amp; interactive()</span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">efc</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">efc</span><span class="op">$</span><span class="va">c172code</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">efc</span><span class="op">$</span><span class="va">c172code</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">efc</span><span class="op">$</span><span class="va">c161sex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">efc</span><span class="op">$</span><span class="va">c161sex</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">efc</span><span class="op">$</span><span class="va">c161sex</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"male"</span>, <span class="st">"female"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">barthtot</span> <span class="op">~</span> <span class="va">c12hour</span> <span class="op">+</span> <span class="va">neg_c_7</span> <span class="op">+</span> <span class="va">c161sex</span> <span class="op">+</span> <span class="va">c172code</span>, data <span class="op">=</span> <span class="va">efc</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># direct computation of comparisons</span></span></span>
<span class="r-in"><span><span class="fu">test_predictions</span><span class="op">(</span><span class="va">m</span>, <span class="st">"c172code"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># passing a `ggeffects` object</span></span></span>
<span class="r-in"><span><span class="va">pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="predict_response.html">predict_response</a></span><span class="op">(</span><span class="va">m</span>, <span class="st">"c172code"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">test_predictions</span><span class="op">(</span><span class="va">pred</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># test for slope</span></span></span>
<span class="r-in"><span><span class="fu">test_predictions</span><span class="op">(</span><span class="va">m</span>, <span class="st">"c12hour"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># interaction - contrasts by groups</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">barthtot</span> <span class="op">~</span> <span class="va">c12hour</span> <span class="op">+</span> <span class="va">c161sex</span> <span class="op">*</span> <span class="va">c172code</span> <span class="op">+</span> <span class="va">neg_c_7</span>, data <span class="op">=</span> <span class="va">efc</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">test_predictions</span><span class="op">(</span><span class="va">m</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c161sex"</span>, <span class="st">"c172code"</span><span class="op">)</span>, test <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># interaction - pairwise comparisons by groups</span></span></span>
<span class="r-in"><span><span class="fu">test_predictions</span><span class="op">(</span><span class="va">m</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c161sex"</span>, <span class="st">"c172code"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># equivalence testing</span></span></span>
<span class="r-in"><span><span class="fu">test_predictions</span><span class="op">(</span><span class="va">m</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c161sex"</span>, <span class="st">"c172code"</span><span class="op">)</span>, equivalence <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2.96</span>, <span class="fl">2.96</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># equivalence testing, using the parameters package</span></span></span>
<span class="r-in"><span><span class="va">pr</span> <span class="op">&lt;-</span> <span class="fu"><a href="predict_response.html">predict_response</a></span><span class="op">(</span><span class="va">m</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c161sex"</span>, <span class="st">"c172code"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">parameters</span><span class="fu">::</span><span class="fu"><a href="https://easystats.github.io/bayestestR/reference/equivalence_test.html" class="external-link">equivalence_test</a></span><span class="op">(</span><span class="va">pr</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># interaction - collapse unique levels</span></span></span>
<span class="r-in"><span><span class="fu">test_predictions</span><span class="op">(</span><span class="va">m</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c161sex"</span>, <span class="st">"c172code"</span><span class="op">)</span>, collapse_levels <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># p-value adjustment</span></span></span>
<span class="r-in"><span><span class="fu">test_predictions</span><span class="op">(</span><span class="va">m</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c161sex"</span>, <span class="st">"c172code"</span><span class="op">)</span>, p_adjust <span class="op">=</span> <span class="st">"tukey"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># not all comparisons, only by specific group levels</span></span></span>
<span class="r-in"><span><span class="fu">test_predictions</span><span class="op">(</span><span class="va">m</span>, <span class="st">"c172code"</span>, by <span class="op">=</span> <span class="st">"c161sex"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># specific comparisons</span></span></span>
<span class="r-in"><span><span class="fu">test_predictions</span><span class="op">(</span><span class="va">m</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"c161sex"</span>, <span class="st">"c172code"</span><span class="op">)</span>, test <span class="op">=</span> <span class="st">"b2 = b1"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># interaction - slope by groups</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">barthtot</span> <span class="op">~</span> <span class="va">c12hour</span> <span class="op">+</span> <span class="va">neg_c_7</span> <span class="op">*</span> <span class="va">c172code</span> <span class="op">+</span> <span class="va">c161sex</span>, data <span class="op">=</span> <span class="va">efc</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">test_predictions</span><span class="op">(</span><span class="va">m</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"neg_c_7"</span>, <span class="st">"c172code"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Interaction and consecutive contrasts -----------------</span></span></span>
<span class="r-in"><span><span class="co"># -------------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">coffee_data</span>, package <span class="op">=</span> <span class="st">"ggeffects"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">alertness</span> <span class="op">~</span> <span class="va">time</span> <span class="op">*</span> <span class="va">coffee</span> <span class="op">+</span> <span class="va">sex</span>, data <span class="op">=</span> <span class="va">coffee_data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># consecutive contrasts</span></span></span>
<span class="r-in"><span><span class="fu">test_predictions</span><span class="op">(</span><span class="va">m</span>, <span class="st">"time"</span>, by <span class="op">=</span> <span class="st">"coffee"</span>, test <span class="op">=</span> <span class="st">"consecutive"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># interaction contrasts - difference-in-difference comparisons</span></span></span>
<span class="r-in"><span><span class="va">pr</span> <span class="op">&lt;-</span> <span class="fu"><a href="predict_response.html">predict_response</a></span><span class="op">(</span><span class="va">m</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"time"</span>, <span class="st">"coffee"</span><span class="op">)</span>, margin <span class="op">=</span> <span class="st">"marginalmeans"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">test_predictions</span><span class="op">(</span><span class="va">pr</span>, test <span class="op">=</span> <span class="st">"interaction"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Custom contrasts --------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># -------------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="va">wakeup_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"wakeup vs later"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span>, <span class="co"># make sure each "side" sums to (+/-)1!</span></span></span>
<span class="r-in"><span>  <span class="st">"start vs end of day"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">test_predictions</span><span class="op">(</span><span class="va">m</span>, <span class="st">"time"</span>, by <span class="op">=</span> <span class="st">"coffee"</span>, test <span class="op">=</span> <span class="va">wakeup_time</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example: marginal effects -----------------------------</span></span></span>
<span class="r-in"><span><span class="co"># -------------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">Petal.Width</span> <span class="op">~</span> <span class="va">Petal.Length</span> <span class="op">+</span> <span class="va">Species</span>, data <span class="op">=</span> <span class="va">iris</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># we now want the marginal effects for "Species". We can calculate</span></span></span>
<span class="r-in"><span><span class="co"># the marginal effect using the "marginaleffects" package</span></span></span>
<span class="r-in"><span><span class="fu">marginaleffects</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/marginaleffects/man/slopes.html" class="external-link">avg_slopes</a></span><span class="op">(</span><span class="va">m</span>, variables <span class="op">=</span> <span class="st">"Species"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># finally, test_predictions() returns the same. while the previous results</span></span></span>
<span class="r-in"><span><span class="co"># report the marginal effect compared to the reference level "setosa",</span></span></span>
<span class="r-in"><span><span class="co"># test_predictions() returns the marginal effects for all pairwise comparisons</span></span></span>
<span class="r-in"><span><span class="fu">test_predictions</span><span class="op">(</span><span class="va">m</span>, <span class="st">"Species"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/strengejacke" class="external-link">Daniel Lüdecke</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer></div>





  </body></html>

