<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>S3-class definition for the ggeffects package — get_predictions • ggeffects</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="S3-class definition for the ggeffects package — get_predictions"><meta name="description" content='get_predictions() is the core function to return adjusted
predictions for a model, when calling ggpredict() or predict_response()
with margin = "mean_reference" (the default option for margin).
Basically, the input contains the model object and a data grid that is
typically used for the newdata argument of the predict() method.
get_predictions() can be used as S3-method for own classes, to add support
for new models in ggeffects and is only relevant for package developers.
There are no S3-class definitions for ggemmeans() or ggaverage(), because
these functions simply call methods from the emmeans or marginaleffects
packages. Hence, methods should be written for those packages, too, if a
model-object should work with ggemmeans() or ggaverage().'><meta property="og:description" content='get_predictions() is the core function to return adjusted
predictions for a model, when calling ggpredict() or predict_response()
with margin = "mean_reference" (the default option for margin).
Basically, the input contains the model object and a data grid that is
typically used for the newdata argument of the predict() method.
get_predictions() can be used as S3-method for own classes, to add support
for new models in ggeffects and is only relevant for package developers.
There are no S3-class definitions for ggemmeans() or ggaverage(), because
these functions simply call methods from the emmeans or marginaleffects
packages. Hence, methods should be written for those packages, too, if a
model-object should work with ggemmeans() or ggaverage().'><meta property="og:image" content="https://strengejacke.github.io/ggeffects/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggeffects</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.8.12</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-introductions" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Introductions</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-introductions"><li><a class="dropdown-item" href="../articles/ggeffects.html">Adjusted predictions of regression models</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_effectsatvalues.html">Adjusted predictions at specific values</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_randomeffects.html">Adjusted predictions for mixed models</a></li>
    <li><a class="dropdown-item" href="../articles/practical_robustestimation.html">(Cluster) Robust standard errors</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-interpretation" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Interpretation</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-interpretation"><li><a class="dropdown-item" href="../articles/introduction_comparisons_1.html">Contrasts and pairwise comparisons</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_comparisons_2.html">Slopes, floodlight and spotlight analysis</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_comparisons_3.html">Contrasts and pairwise comparisons for GLM</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_comparisons_4.html">Contrasts and pairwise comparisons for Zero-Inflation Models</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_comparisons_5.html">Using marginaleffects or emmeans for comparisons</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_partial_residuals.html">Adding partial residuals to effects plots</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-plotting-and-printing" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Plotting and Printing</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-plotting-and-printing"><li><a class="dropdown-item" href="../articles/introduction_plotmethod.html">Plotting adjusted predictions</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_plotcustomize.html">Customize plot appearance</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_print.html">Customize table appearance</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-case-studies" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Case Studies</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-case-studies"><li><a class="dropdown-item" href="../articles/practical_glm_workflow.html">Simple workflow using logistic regression</a></li>
    <li><a class="dropdown-item" href="../articles/practical_logisticmixedmodel.html">Logistic mixed effects Model with interaction term</a></li>
    <li><a class="dropdown-item" href="../articles/practical_intersectionality.html">Intersectionality analysis using the MAIHDA framework</a></li>
    <li><a class="dropdown-item" href="../articles/practical_marginaleffects_pkg.html">Comparison of ggeffects and marginaleffects</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-technical-details" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Technical Details</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-technical-details"><li><a class="dropdown-item" href="../articles/technical_differencepredictemmeans.html">Difference between marginalization methods</a></li>
    <li><a class="dropdown-item" href="../articles/technical_stata.html">Different Output between Stata and ggeffects</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/strengejacke/ggeffects/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>S3-class definition for the ggeffects package</h1>
      <small class="dont-index">Source: <a href="https://github.com/strengejacke/ggeffects/blob/master/R/get_predictions.R" class="external-link"><code>R/get_predictions.R</code></a></small>
      <div class="d-none name"><code>get_predictions.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>get_predictions()</code> is the core function to return adjusted
predictions for a model, when calling <code><a href="ggpredict.html">ggpredict()</a></code> or <code><a href="predict_response.html">predict_response()</a></code>
with <code>margin = "mean_reference"</code> (the default option for <code>margin</code>).
Basically, the input contains the model object and a data grid that is
typically used for the <code>newdata</code> argument of the <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> method.
<code>get_predictions()</code> can be used as S3-method for own classes, to add support
for new models in <strong>ggeffects</strong> and is only relevant for package developers.</p>
<p>There are no S3-class definitions for <code><a href="ggpredict.html">ggemmeans()</a></code> or <code><a href="ggpredict.html">ggaverage()</a></code>, because
these functions simply call methods from the <strong>emmeans</strong> or <strong>marginaleffects</strong>
packages. Hence, methods should be written for those packages, too, if a
model-object should work with <code><a href="ggpredict.html">ggemmeans()</a></code> or <code><a href="ggpredict.html">ggaverage()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_predictions</span><span class="op">(</span><span class="va">model</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">get_predictions</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  data_grid <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  terms <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ci_level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  typical <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  vcov <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  vcov_args <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  condition <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  interval <span class="op">=</span> <span class="st">"confidence"</span>,</span>
<span>  bias_correction <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  link_inverse <span class="op">=</span> <span class="fu">insight</span><span class="fu">::</span><span class="fu"><a href="https://easystats.github.io/insight/reference/link_inverse.html" class="external-link">link_inverse</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span>,</span>
<span>  model_info <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-model-terms-ci-level-type-typical-vcov-vcov-args-condition-interval-bias-correction-verbose">model, terms, ci_level, type, typical, vcov, vcov_args, condition, interval, bias_correction, verbose<a class="anchor" aria-label="anchor" href="#arg-model-terms-ci-level-type-typical-vcov-vcov-args-condition-interval-bias-correction-verbose"></a></dt>
<dd><p>Arguments
from the call to <code><a href="predict_response.html">predict_response()</a></code> that are passed down to <code>get_predictions()</code>.
Note that <code>bias_correction</code> is usally already processed in <code><a href="predict_response.html">predict_response()</a></code>
and thus doesn't need further handling in <code>get_predictions()</code>, unless you
need to re-calculate the link-inverse-function (argument <code>link_inverse</code>)
inside the <code>get_predictions()</code> method.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further arguments, passed to <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> or other methods used
in <code>get_predictions()</code>.</p></dd>


<dt id="arg-data-grid">data_grid<a class="anchor" aria-label="anchor" href="#arg-data-grid"></a></dt>
<dd><p>A data frame containing the data grid (or reference grid)
with all relevant values of predictors for which the adjusted predictions
should be made. Typically the data frame that is passed to the <code>newdata</code>
argument in <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code>. A data grid can be created with functions like
<code><a href="new_data.html">data_grid()</a></code> or <code><a href="https://easystats.github.io/insight/reference/get_datagrid.html" class="external-link">insight::get_datagrid()</a></code>.</p></dd>


<dt id="arg-link-inverse">link_inverse<a class="anchor" aria-label="anchor" href="#arg-link-inverse"></a></dt>
<dd><p>The model's family link-inverse function. Can be retrieved
using <code><a href="https://easystats.github.io/insight/reference/link_inverse.html" class="external-link">insight::link_inverse()</a></code>.</p></dd>


<dt id="arg-model-info">model_info<a class="anchor" aria-label="anchor" href="#arg-model-info"></a></dt>
<dd><p>An object returned by <code><a href="https://easystats.github.io/insight/reference/model_info.html" class="external-link">insight::model_info()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame that contains</p><ul><li><p>the data grid</p></li>
<li><p>the columns <code>predicted</code>, <code>conf.low</code>, and <code>conf.high</code></p></li>
<li><p>optionally, the attribute <code>"std.error"</code> with the standard errors.</p></li>
</ul><p>Note that predictions and confidence intervals should already be transformed
to the <em>response</em> scale (e.g., by using <code><a href="https://easystats.github.io/insight/reference/link_inverse.html" class="external-link">insight::link_inverse()</a></code>). The
<em>standard errors</em> are always on the link scale (not transformed).</p>
<p>If values are not available (for example, confidence intervals), set their
value to <code>NA</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Adding support for <strong>ggeffects</strong> is quite easy. The user-level function is
<code><a href="predict_response.html">predict_response()</a></code>, which either calls <code><a href="ggpredict.html">ggpredict()</a></code>, <code><a href="ggpredict.html">ggemmeans()</a></code> or
<code><a href="ggpredict.html">ggaverage()</a></code>. These function, in turn, call <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code>, <code><a href="https://rvlenth.github.io/emmeans/reference/emmeans.html" class="external-link">emmeans::emmeans()</a></code>
or <code><a href="https://rdrr.io/pkg/marginaleffects/man/predictions.html" class="external-link">marginaleffects::avg_predictions()</a></code>. Following needs to be done to add
support for new model classes:</p><ul><li><p><strong>emmeans</strong>: if your model is supported by emmeans, it is automatically
supported by <code><a href="ggpredict.html">ggemmeans()</a></code>. Thus, you need to add the corresponding methods
to your package so that your model class is supported by **emmeans.</p></li>
<li><p><strong>marginaleffects</strong>: similar to <strong>emmeans</strong>, if your package is supported
by the <strong>marginaleffects</strong> package, it works with <code><a href="ggpredict.html">ggaverage()</a></code>.</p></li>
<li><p><strong>predict</strong>: in order to make your model class work with <code><a href="ggpredict.html">ggpredict()</a></code>,
you need to add a <code>get_predictions()</code> method. The here documented arguments
are <em>all</em> passed from <code><a href="predict_response.html">predict_response()</a></code> to <code>get_predictions()</code>, no
matter if they are required to calculate predictions or not. Thus, it is
not necessary to process all of those arguments, but they can be used to
modulate certain settings when calculating predictions. Note that if your
method does not define all mentioned arguments, these are still passed via
<code>...</code> - make sure that further methods in your <code>get_predictions()</code> method
still work when they process the <code>...</code>. It is important that the function
returns a data frame with a specific structure, namely the data grid and
the columns <code>predicted</code>, <code>conf.low</code>, and <code>conf.high</code>. Predictions and
intervals should be on the response scale.</p></li>
</ul><p>A simple example for an own class-implementation for Gaussian-alike models
could look like this:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>get_predictions.own_class <span class="ot">&lt;-</span> <span class="cf">function</span>(model, data_grid, <span class="at">ci_level =</span> <span class="fl">0.95</span>, ...) {</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>  predictions <span class="ot">&lt;-</span> <span class="fu">predict</span>(</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>    model,</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>    <span class="at">newdata =</span> data_grid,</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">"response"</span>,</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>    <span class="at">se.fit =</span> <span class="sc">!</span><span class="fu">is.na</span>(ci_level),</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>    ...</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>  )</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>  <span class="co"># do we have standard errors?</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.na</span>(ci_level)) {</span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a>    <span class="co"># copy predictions</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>    data_grid<span class="sc">$</span>predicted <span class="ot">&lt;-</span> <span class="fu">as.vector</span>(predictions)</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a>    <span class="co"># copy predictions</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a>    data_grid<span class="sc">$</span>predicted <span class="ot">&lt;-</span> predictions<span class="sc">$</span>fit</span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a>    <span class="co"># calculate CI</span></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a>    data_grid<span class="sc">$</span>conf.low <span class="ot">&lt;-</span> predictions<span class="sc">$</span>fit <span class="sc">-</span> <span class="fu">qnorm</span>(<span class="fl">0.975</span>) <span class="sc">*</span> predictions<span class="sc">$</span>se.fit</span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a>    data_grid<span class="sc">$</span>conf.high <span class="ot">&lt;-</span> predictions<span class="sc">$</span>fit <span class="sc">+</span> <span class="fu">qnorm</span>(<span class="fl">0.975</span>) <span class="sc">*</span> predictions<span class="sc">$</span>se.fit</span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a>    <span class="co"># optional: copy standard errors</span></span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a>    <span class="fu">attr</span>(data_grid, <span class="st">"std.error"</span>) <span class="ot">&lt;-</span> predictions<span class="sc">$</span>se.fit</span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a>  }</span>
<span id="cb1-25"><a href="#cb1-25" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" tabindex="-1"></a>  data_grid</span>
<span id="cb1-27"><a href="#cb1-27" tabindex="-1"></a>}</span></code></pre><p></p></div>
<p>A simple example for an own class-implementation for non-Gaussian-alike models
could look like this (note the use of the link-inverse function <code>link_inverse()</code>,
which is passed to the <code>link_inverse</code> argument):</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>get_predictions.own_class <span class="ot">&lt;-</span> <span class="cf">function</span>(model,</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>                                      data_grid,</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>                                      <span class="at">ci_level =</span> <span class="fl">0.95</span>,</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>                                      <span class="at">link_inverse =</span> insight<span class="sc">::</span><span class="fu">link_inverse</span>(model),</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>                                      ...) {</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>  predictions <span class="ot">&lt;-</span> <span class="fu">predict</span>(</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>    model,</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>    <span class="at">newdata =</span> data_grid,</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">"link"</span>, <span class="co"># for non-Gaussian, return on link-scale</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>    <span class="at">se.fit =</span> <span class="sc">!</span><span class="fu">is.na</span>(ci_level),</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>    ...</span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a>  )</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>  <span class="co"># do we have standard errors?</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.na</span>(ci_level)) {</span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a>    <span class="co"># copy predictions</span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a>    data_grid<span class="sc">$</span>predicted <span class="ot">&lt;-</span> <span class="fu">link_inverse</span>(<span class="fu">as.vector</span>(predictions))</span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a>    <span class="co"># copy predictions, use link-inverse to back-transform</span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a>    data_grid<span class="sc">$</span>predicted <span class="ot">&lt;-</span> <span class="fu">link_inverse</span>(predictions<span class="sc">$</span>fit)</span>
<span id="cb1-21"><a href="#cb1-21" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" tabindex="-1"></a>    <span class="co"># calculate CI</span></span>
<span id="cb1-23"><a href="#cb1-23" tabindex="-1"></a>    data_grid<span class="sc">$</span>conf.low <span class="ot">&lt;-</span> <span class="fu">link_inverse</span>(</span>
<span id="cb1-24"><a href="#cb1-24" tabindex="-1"></a>      predictions<span class="sc">$</span>fit <span class="sc">-</span> <span class="fu">qnorm</span>(<span class="fl">0.975</span>) <span class="sc">*</span> predictions<span class="sc">$</span>se.fit</span>
<span id="cb1-25"><a href="#cb1-25" tabindex="-1"></a>    )</span>
<span id="cb1-26"><a href="#cb1-26" tabindex="-1"></a>    data_grid<span class="sc">$</span>conf.high <span class="ot">&lt;-</span> <span class="fu">link_inverse</span>(</span>
<span id="cb1-27"><a href="#cb1-27" tabindex="-1"></a>      predictions<span class="sc">$</span>fit <span class="sc">+</span> <span class="fu">qnorm</span>(<span class="fl">0.975</span>) <span class="sc">*</span> predictions<span class="sc">$</span>se.fit</span>
<span id="cb1-28"><a href="#cb1-28" tabindex="-1"></a>    )</span>
<span id="cb1-29"><a href="#cb1-29" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" tabindex="-1"></a>    <span class="co"># optional: copy standard errors</span></span>
<span id="cb1-31"><a href="#cb1-31" tabindex="-1"></a>    <span class="fu">attr</span>(data_grid, <span class="st">"std.error"</span>) <span class="ot">&lt;-</span> predictions<span class="sc">$</span>se.fit</span>
<span id="cb1-32"><a href="#cb1-32" tabindex="-1"></a>  }</span>
<span id="cb1-33"><a href="#cb1-33" tabindex="-1"></a></span>
<span id="cb1-34"><a href="#cb1-34" tabindex="-1"></a>  data_grid</span>
<span id="cb1-35"><a href="#cb1-35" tabindex="-1"></a>}</span></code></pre><p></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/strengejacke" class="external-link">Daniel Lüdecke</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer></div>





  </body></html>

