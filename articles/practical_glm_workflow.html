<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Case Study: Simple Workflow Using Logistic Regression • ggeffects</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet">
<link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Case Study: Simple Workflow Using Logistic Regression">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggeffects</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.8.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-introductions" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Introductions</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-introductions">
<li><a class="dropdown-item" href="../articles/ggeffects.html">Adjusted predictions of regression models</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_effectsatvalues.html">Adjusted predictions at specific values</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_randomeffects.html">Adjusted predictions for mixed models</a></li>
    <li><a class="dropdown-item" href="../articles/practical_robustestimation.html">(Cluster) Robust standard errors</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-interpretation" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Interpretation</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-interpretation">
<li><a class="dropdown-item" href="../articles/introduction_comparisons_1.html">Contrasts and pairwise comparisons</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_comparisons_2.html">Slopes, floodlight and spotlight analysis</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_comparisons_3.html">Contrasts and pairwise comparisons for GLM</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_comparisons_4.html">Contrasts and pairwise comparisons for Zero-Inflation Models</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_comparisons_5.html">Using marginaleffects or emmeans for comparisons</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_partial_residuals.html">Adding partial residuals to effects plots</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-plotting-and-printing" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Plotting and Printing</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-plotting-and-printing">
<li><a class="dropdown-item" href="../articles/introduction_plotmethod.html">Plotting adjusted predictions</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_plotcustomize.html">Customize plot appearance</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_print.html">Customize table appearance</a></li>
  </ul>
</li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-case-studies" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Case Studies</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-case-studies">
<li><a class="dropdown-item" href="../articles/practical_glm_workflow.html">Simple workflow using logistic regression</a></li>
    <li><a class="dropdown-item" href="../articles/practical_logisticmixedmodel.html">Logistic mixed effects Model with interaction term</a></li>
    <li><a class="dropdown-item" href="../articles/practical_intersectionality.html">Intersectionality analysis using the MAIHDA framework</a></li>
    <li><a class="dropdown-item" href="../articles/practical_marginaleffects_pkg.html">Comparison of ggeffects and marginaleffects</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-technical-details" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Technical Details</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-technical-details">
<li><a class="dropdown-item" href="../articles/technical_differencepredictemmeans.html">Difference between marginalization methods</a></li>
    <li><a class="dropdown-item" href="../articles/technical_stata.html">Different Output between Stata and ggeffects</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/strengejacke/ggeffects/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Case Study: Simple Workflow Using Logistic Regression</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/strengejacke/ggeffects/blob/master/vignettes/practical_glm_workflow.Rmd" class="external-link"><code>vignettes/practical_glm_workflow.Rmd</code></a></small>
      <div class="d-none name"><code>practical_glm_workflow.Rmd</code></div>
    </div>

    
    
<p>This vignette demonstrates a typical workflow using the
<code>ggeffects</code> package, with a logistic regression model as an
example. We will explore various aspects of the model, such as model
coefficients, predicted probabilities, and pairwise comparisons. Let’s
get started!</p>
<div class="section level2">
<h2 id="preparing-the-data-and-fitting-a-model">Preparing the data and fitting a model<a class="anchor" aria-label="anchor" href="#preparing-the-data-and-fitting-a-model"></a>
</h2>
<p>First, we load the <code>ggeffects</code> package and the
<code>coffee_data</code> data set, which is included in the package. The
data set contains information on the effect of coffee consumption on
alertness over time. The outcome variable is binary (alertness), and the
predictor variables are coffee consumption (treatment) and time.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://strengejacke.github.io/ggeffects/">ggeffects</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://easystats.github.io/parameters/" class="external-link">parameters</a></span><span class="op">)</span> <span class="co"># for model summary</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://easystats.github.io/datawizard/" class="external-link">datawizard</a></span><span class="op">)</span> <span class="co"># for recodings</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">coffee_data</span>, package <span class="op">=</span> <span class="st">"ggeffects"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># dichotomize outcome variable</span></span>
<span><span class="va">coffee_data</span><span class="op">$</span><span class="va">alertness</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://easystats.github.io/datawizard/reference/categorize.html" class="external-link">categorize</a></span><span class="op">(</span><span class="va">coffee_data</span><span class="op">$</span><span class="va">alertness</span>, lowest <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co"># rename variable</span></span>
<span><span class="va">coffee_data</span><span class="op">$</span><span class="va">treatment</span> <span class="op">&lt;-</span> <span class="va">coffee_data</span><span class="op">$</span><span class="va">coffee</span></span>
<span></span>
<span><span class="co"># model</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">alertness</span> <span class="op">~</span> <span class="va">treatment</span> <span class="op">*</span> <span class="va">time</span>, data <span class="op">=</span> <span class="va">coffee_data</span>, family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="exploring-the-model---model-coefficients">Exploring the model - model coefficients<a class="anchor" aria-label="anchor" href="#exploring-the-model---model-coefficients"></a>
</h2>
<p>Let’s start by examining the model coefficients. We can use the
<code><a href="https://easystats.github.io/parameters/reference/model_parameters.html" class="external-link">model_parameters()</a></code> function to extract the coefficients
from the model. By setting <code>exponentiate = TRUE</code>, we can
obtain the odds ratios for the coefficients.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># coefficients</span></span>
<span><span class="fu"><a href="https://easystats.github.io/parameters/reference/model_parameters.html" class="external-link">model_parameters</a></span><span class="op">(</span><span class="va">model</span>, exponentiate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Parameter                              | Odds Ratio |   SE |        95% CI |         z |      p</span></span>
<span><span class="co">#&gt; -----------------------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; (Intercept)                            |       1.00 | 0.45 | [0.41,  2.44] | -1.54e-15 | &gt; .999</span></span>
<span><span class="co">#&gt; treatment [control]                    |       0.33 | 0.23 | [0.08,  1.23] |     -1.61 | 0.108 </span></span>
<span><span class="co">#&gt; time [noon]                            |       0.54 | 0.35 | [0.15,  1.90] |     -0.96 | 0.339 </span></span>
<span><span class="co">#&gt; time [afternoon]                       |       3.00 | 2.05 | [0.81, 12.24] |      1.61 | 0.108 </span></span>
<span><span class="co">#&gt; treatment [control] × time [noon]      |      10.35 | 9.85 | [1.66, 70.73] |      2.45 | 0.014 </span></span>
<span><span class="co">#&gt; treatment [control] × time [afternoon] |       1.00 | 0.97 | [0.15,  6.74] | -6.10e-16 | &gt; .999</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Uncertainty intervals (profile-likelihood) and p-values (two-tailed) computed using a Wald z-distribution approximation.</span></span></code></pre></div>
<p>The model coefficients are difficult to interpret directly, in
particular sinc we have an interaction effect. Instead, we should use
the <code><a href="../reference/predict_response.html">predict_response()</a></code> function to calculate predicted
probabilities for the model. These refer to the adjusted probabilities
of the outcome (higher alertness) depending on the predictor variables
(treatment and time).</p>
</div>
<div class="section level2">
<h2 id="predicted-probabilities---understanding-the-model">Predicted probabilities - understanding the model<a class="anchor" aria-label="anchor" href="#predicted-probabilities---understanding-the-model"></a>
</h2>
<p>Thus, since we are interested in the interaction effect of coffee
consumption (treatment) on alertness depending on different times of the
day, we simply specify these two variables as <em>focal terms</em> in
the <code><a href="../reference/predict_response.html">predict_response()</a></code> function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># predicted probabilities</span></span>
<span><span class="va">predictions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/predict_response.html">predict_response</a></span><span class="op">(</span><span class="va">model</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"time"</span>, <span class="st">"treatment"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plot.html">plot</a></span><span class="op">(</span><span class="va">predictions</span><span class="op">)</span></span></code></pre></div>
<p><img src="practical_glm_workflow_files/figure-html/unnamed-chunk-3-1.png" width="672"></p>
<p>As we can see, the predicted probabilities of alertness are higher
for participants who consumed coffee compared to those who did not, but
only in the morning and in the afternoon. Furthermore, we see
differences between the <em>coffee</em> and the <em>control</em> group
at each time point - but are these differences statistically
significant?</p>
</div>
<div class="section level2">
<h2 id="pairwise-comparisons---testing-the-differences">Pairwise comparisons - testing the differences<a class="anchor" aria-label="anchor" href="#pairwise-comparisons---testing-the-differences"></a>
</h2>
<p>To check this, we finally use the <code><a href="../reference/test_predictions.html">test_predictions()</a></code>
function to perform pairwise comparisons of the predicted probabilities.
We simply pass our results from <code><a href="../reference/predict_response.html">predict_response()</a></code> to the
function.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># pairwise comparisons - quite long table</span></span>
<span><span class="fu"><a href="../reference/test_predictions.html">test_predictions</a></span><span class="op">(</span><span class="va">predictions</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Pairwise comparisons</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; time                |       treatment | Contrast |       95% CI |      p</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt; morning-noon        |   coffee-coffee |     0.15 | -0.15,  0.45 | 0.332 </span></span>
<span><span class="co">#&gt; morning-afternoon   |   coffee-coffee |    -0.25 | -0.54,  0.04 | 0.091 </span></span>
<span><span class="co">#&gt; morning-morning     |  coffee-control |     0.25 | -0.04,  0.54 | 0.091 </span></span>
<span><span class="co">#&gt; morning-noon        |  coffee-control |    -0.15 | -0.45,  0.15 | 0.332 </span></span>
<span><span class="co">#&gt; morning-afternoon   |  coffee-control |     0.00 | -0.31,  0.31 | &gt; .999</span></span>
<span><span class="co">#&gt; noon-afternoon      |   coffee-coffee |    -0.40 | -0.68, -0.12 | 0.005 </span></span>
<span><span class="co">#&gt; noon-morning        |  coffee-control |     0.10 | -0.18,  0.38 | 0.488 </span></span>
<span><span class="co">#&gt; noon-noon           |  coffee-control |    -0.30 | -0.60,  0.00 | 0.047 </span></span>
<span><span class="co">#&gt; noon-afternoon      |  coffee-control |    -0.15 | -0.45,  0.15 | 0.332 </span></span>
<span><span class="co">#&gt; afternoon-morning   |  coffee-control |     0.50 |  0.23,  0.77 | &lt; .001</span></span>
<span><span class="co">#&gt; afternoon-noon      |  coffee-control |     0.10 | -0.18,  0.38 | 0.488 </span></span>
<span><span class="co">#&gt; afternoon-afternoon |  coffee-control |     0.25 | -0.04,  0.54 | 0.091 </span></span>
<span><span class="co">#&gt; morning-noon        | control-control |    -0.40 | -0.68, -0.12 | 0.005 </span></span>
<span><span class="co">#&gt; morning-afternoon   | control-control |    -0.25 | -0.54,  0.04 | 0.091 </span></span>
<span><span class="co">#&gt; noon-afternoon      | control-control |     0.15 | -0.15,  0.45 | 0.332</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Contrasts are presented as probabilities (in %-points).</span></span></code></pre></div>
<p>In the above output, we see all possible pairwise comparisons of the
predicted probabilities. The table is quite long, but we can also group
the comparisons, e.g. by the variable <em>time</em>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># group comparisons by "time"</span></span>
<span><span class="fu"><a href="../reference/test_predictions.html">test_predictions</a></span><span class="op">(</span><span class="va">predictions</span>, by <span class="op">=</span> <span class="st">"time"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Pairwise comparisons</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; time      |      treatment | Contrast |       95% CI |     p</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span>
<span><span class="co">#&gt; morning   | coffee-control |     0.25 | -0.04,  0.54 | 0.091</span></span>
<span><span class="co">#&gt; noon      | coffee-control |    -0.30 | -0.60,  0.00 | 0.047</span></span>
<span><span class="co">#&gt; afternoon | coffee-control |     0.25 | -0.04,  0.54 | 0.091</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Contrasts are presented as probabilities (in %-points).</span></span></code></pre></div>
<p>The output shows that the differences between the <em>coffee</em> and
the <em>control</em> group are statistically significant only in the
noon time.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/strengejacke" class="external-link">Daniel Lüdecke</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer>
</div>





  </body>
</html>
