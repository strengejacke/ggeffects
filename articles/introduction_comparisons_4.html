<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ggeffects">
<title>Different Backends For Pairwise Comparisons • ggeffects</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet">
<link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Different Backends For Pairwise Comparisons">
<meta property="og:description" content="ggeffects">
<meta property="og:image" content="https://strengejacke.github.io/ggeffects/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">
    <a class="navbar-brand me-2" href="../index.html">ggeffects</a>
    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.6.0</small>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-introductions" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Introductions</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-introductions">
<li><a class="dropdown-item" href="../articles/ggeffects.html">Adjusted predictions of regression models</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_effectsatvalues.html">Adjusted predictions at specific values</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_randomeffects.html">Adjusted predictions for mixed models</a></li>
    <li><a class="dropdown-item" href="../articles/practical_robustestimation.html">(Cluster) Robust standard errors</a></li>
  </ul>
</li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-interpretation" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Interpretation</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-interpretation">
<li><a class="dropdown-item" href="../articles/introduction_comparisons_1.html">Contrasts and pairwise comparisons</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_comparisons_2.html">Slopes, floodlight and spotlight analysis</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_comparisons_3.html">Contrasts and pairwise comparisons for GLM</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_comparisons_4.html">Using marginaleffects or emmeans for comparisons</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_partial_residuals.html">Adding partial residuals to effects plots</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-plotting-and-printing" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Plotting and Printing</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-plotting-and-printing">
<li><a class="dropdown-item" href="../articles/introduction_plotmethod.html">Plotting adjusted predictions</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_plotcustomize.html">Customize plot appearance</a></li>
    <li><a class="dropdown-item" href="../articles/introduction_print.html">Customize table appearance</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-case-studies" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Case Studies</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-case-studies">
<li><a class="dropdown-item" href="../articles/practical_glm_workflow.html">Simple workflow using logistic regression</a></li>
    <li><a class="dropdown-item" href="../articles/practical_logisticmixedmodel.html">Logistic mixed effects Model with interaction term</a></li>
    <li><a class="dropdown-item" href="../articles/practical_intersectionality.html">Intersectionality analysis using the MAIHDA framework</a></li>
    <li><a class="dropdown-item" href="../articles/practical_marginaleffects_pkg.html">Comparison of ggeffects and marginaleffects</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-technical-details" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Technical Details</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-technical-details">
<li><a class="dropdown-item" href="../articles/technical_differencepredictemmeans.html">Difference between marginalization methods</a></li>
    <li><a class="dropdown-item" href="../articles/technical_stata.html">Different Output between Stata and ggeffects</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/strengejacke/ggeffects/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>
  </div>
</nav><div class="container template-article">



<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Different Backends For Pairwise Comparisons</h1>
                        <small class="dont-index">Source: <a href="https://github.com/strengejacke/ggeffects/blob/HEAD/vignettes/introduction_comparisons_4.Rmd" class="external-link"><code>vignettes/introduction_comparisons_4.Rmd</code></a></small>
      <div class="d-none name"><code>introduction_comparisons_4.Rmd</code></div>
    </div>
        <style type="text/css">.callout-tip {
  border: solid 3px #fbd46d;
  border-radius: 5px;
  background-color: #f7fbe1;
  color: #303960;
  padding: 0px;
  margin-bottom: 1.5em;
  margin-top: 1.5em;
}

.callout-tip li {
  margin-bottom: 0.4em;
  margin-top: 0.4em;
  margin-right: 17px;
}

.indent_p {
  padding-left: 17px;
}

.callout-tip code {
  color: #d32626;
}

.callout-tip h1, .callout-tip h1, .callout-tip h2 {
  font-size: 1.3em;
  color: #d32626;
  padding: 3px;
  padding-left: 15px;
  background-color: #fbd46d;
  margin-bottom: 15px;
}</style>
<p>This vignette is roughly a duplication of the first vignette about <a href="https://strengejacke.github.io/ggeffects/articles/introduction_comparisons_1.html"><em>Contrasts
and Pairwise Comparisons</em></a>, but demonstrating the different
backends for the calculation of pairwise comparisons. The default
backend is the <a href="https://vincentarelbundock.github.io/marginaleffects/" class="external-link"><em>marginaleffects</em></a>
package. If desired, <code>engine = "emmeans"</code> can be used to
switch to the <a href="https://cran.r-project.org/package=emmeans" class="external-link"><em>emmeans</em></a>
package. <code>engine = "ggeffects"</code> is currently experimental and
work-in-progress. It is less feature-rich than the other backends, but
it also works for predictions of random effects.</p>
<div class="callout-tip">
<h1>
<img src="../reference/figures/summary.png" width="20" height="17" style="vertical-align:middle">
Summary of most important points:
</h1>
<ul>
<li>
The 
<em>ggeffects-package</em>
 relies on the 
<em>marginaleffects-package</em>
 by default to calculate contrasts and pairwise comparisons.
</li>
<li>
Although this covers many different ways to test contrasts and comparisons, sometimes it can be convenient or necessary to calculate specific contrasts, like consecutive, interaction or custom contrasts. In this case (e.g. when 
<code>test="consecutive"</code>
, or a data frame for custom contrasts), 
<code><a href="../reference/test_predictions.html">test_predictions()</a></code>
 automatically switches the backend to the 
<em>emmeans-package</em>
.
</li>
<li>
The backend can also be changed explicitly by using the 
<code>engine</code>
 argument. Usually, this is not necessary, unless you want to calculate contrasts of random effects levels. This is currently only possible for 
<code>engine="ggeffects"</code>
 (see vignette "Case Study: Intersectionality Analysis Using The MAIHDA Framework").
</li>
</ul>
</div>
<div class="section level3">
<h3 id="within-episode-do-levels-differ">Within <code>episode</code>, do levels differ?<a class="anchor" aria-label="anchor" href="#within-episode-do-levels-differ"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://strengejacke.github.io/ggeffects/">ggeffects</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">200</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  outcome <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>,</span>
<span>  grp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"treatment"</span>, <span class="st">"control"</span><span class="op">)</span>, <span class="va">n</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  episode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="va">n</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"female"</span>, <span class="st">"male"</span><span class="op">)</span>, <span class="va">n</span>, <span class="cn">TRUE</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.6</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">model1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">~</span> <span class="va">grp</span> <span class="op">+</span> <span class="va">episode</span> <span class="op">+</span> <span class="va">grp</span>, data <span class="op">=</span> <span class="va">d</span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="predictions">Predictions<a class="anchor" aria-label="anchor" href="#predictions"></a>
</h4>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/predict_response.html">predict_response</a></span><span class="op">(</span><span class="va">model1</span>, <span class="st">"episode"</span>, margin <span class="op">=</span> <span class="st">"marginalmeans"</span><span class="op">)</span></span>
<span><span class="va">my_pred</span></span>
<span><span class="co">#&gt; # Predicted values of outcome</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; episode | Predicted |      95% CI</span></span>
<span><span class="co">#&gt; ---------------------------------</span></span>
<span><span class="co">#&gt; 1       |     -0.16 | -0.39, 0.07</span></span>
<span><span class="co">#&gt; 2       |      0.20 | -0.04, 0.43</span></span>
<span><span class="co">#&gt; 3       |     -0.06 | -0.28, 0.16</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="pairwise-comparisons">Pairwise comparisons<a class="anchor" aria-label="anchor" href="#pairwise-comparisons"></a>
</h4>
<p><img src="introduction_comparisons_4_files/figure-html/unnamed-chunk-5-1.png" width="672"></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># comparisons based on estimated marginal means, using "marginaleffects" package</span></span>
<span><span class="fu"><a href="../reference/test_predictions.html">test_predictions</a></span><span class="op">(</span><span class="va">model1</span>, <span class="st">"episode"</span>, margin <span class="op">=</span> <span class="st">"marginalmeans"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Pairwise comparisons</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; episode | Contrast |       95% CI |     p</span></span>
<span><span class="co">#&gt; -----------------------------------------</span></span>
<span><span class="co">#&gt; 1-2     |    -0.36 | -0.68, -0.03 | 0.031</span></span>
<span><span class="co">#&gt; 1-3     |    -0.10 | -0.42,  0.22 | 0.538</span></span>
<span><span class="co">#&gt; 2-3     |     0.26 | -0.06,  0.58 | 0.112</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># comparisons using "emmeans" package</span></span>
<span><span class="fu"><a href="../reference/test_predictions.html">test_predictions</a></span><span class="op">(</span><span class="va">model1</span>, <span class="st">"episode"</span>, engine <span class="op">=</span> <span class="st">"emmeans"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Pairwise comparisons</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; episode | Contrast |       95% CI |     p</span></span>
<span><span class="co">#&gt; -----------------------------------------</span></span>
<span><span class="co">#&gt; 1-2     |    -0.36 | -0.68, -0.03 | 0.031</span></span>
<span><span class="co">#&gt; 1-3     |    -0.10 | -0.42,  0.22 | 0.538</span></span>
<span><span class="co">#&gt; 2-3     |     0.26 | -0.06,  0.58 | 0.112</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># comparisons using "ggeffects" backend. This engine requires the</span></span>
<span><span class="co"># ggeffects-object as input</span></span>
<span><span class="fu"><a href="../reference/test_predictions.html">test_predictions</a></span><span class="op">(</span><span class="va">my_pred</span>, engine <span class="op">=</span> <span class="st">"ggeffects"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Pairwise comparisons</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; episode | Contrast |       95% CI |     p</span></span>
<span><span class="co">#&gt; -----------------------------------------</span></span>
<span><span class="co">#&gt; 1-2     |    -0.36 | -0.68, -0.03 | 0.031</span></span>
<span><span class="co">#&gt; 1-3     |    -0.10 | -0.41,  0.22 | 0.538</span></span>
<span><span class="co">#&gt; 2-3     |     0.26 | -0.06,  0.58 | 0.111</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="does-same-level-of-episode-differ-between-groups">Does same level of episode differ between groups?<a class="anchor" aria-label="anchor" href="#does-same-level-of-episode-differ-between-groups"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">~</span> <span class="va">grp</span> <span class="op">*</span> <span class="va">episode</span> <span class="op">+</span> <span class="va">grp</span>, data <span class="op">=</span> <span class="va">d</span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="predictions-1">Predictions<a class="anchor" aria-label="anchor" href="#predictions-1"></a>
</h4>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/predict_response.html">predict_response</a></span><span class="op">(</span><span class="va">model2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"episode"</span>, <span class="st">"grp"</span><span class="op">)</span>, margin <span class="op">=</span> <span class="st">"marginalmeans"</span><span class="op">)</span></span>
<span><span class="va">my_pred</span></span>
<span><span class="co">#&gt; # Predicted values of outcome</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; grp: control</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; episode | Predicted |       95% CI</span></span>
<span><span class="co">#&gt; ----------------------------------</span></span>
<span><span class="co">#&gt; 1       |      0.03 | -0.27,  0.33</span></span>
<span><span class="co">#&gt; 2       |      0.23 | -0.08,  0.54</span></span>
<span><span class="co">#&gt; 3       |     -0.04 | -0.36,  0.28</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; grp: treatment</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; episode | Predicted |       95% CI</span></span>
<span><span class="co">#&gt; ----------------------------------</span></span>
<span><span class="co">#&gt; 1       |     -0.39 | -0.74, -0.04</span></span>
<span><span class="co">#&gt; 2       |      0.18 | -0.18,  0.53</span></span>
<span><span class="co">#&gt; 3       |     -0.09 | -0.39,  0.21</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="pairwise-comparisons-1">Pairwise comparisons<a class="anchor" aria-label="anchor" href="#pairwise-comparisons-1"></a>
</h4>
<p><img src="introduction_comparisons_4_files/figure-html/unnamed-chunk-9-1.png" width="672"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># we want "episode = 2-2" and "grp = control-treatment"</span></span>
<span></span>
<span><span class="co"># comparisons based on estimated marginal means, using "marginaleffects" package</span></span>
<span><span class="fu"><a href="../reference/test_predictions.html">test_predictions</a></span><span class="op">(</span><span class="va">model2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"episode [2]"</span>, <span class="st">"grp"</span><span class="op">)</span>, margin <span class="op">=</span> <span class="st">"marginalmeans"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Pairwise comparisons</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; grp               | Contrast |      95% CI |     p</span></span>
<span><span class="co">#&gt; --------------------------------------------------</span></span>
<span><span class="co">#&gt; control-treatment |     0.06 | -0.41, 0.52 | 0.816</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># comparisons based using "emmeans" package</span></span>
<span><span class="fu"><a href="../reference/test_predictions.html">test_predictions</a></span><span class="op">(</span><span class="va">model2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"episode [2]"</span>, <span class="st">"grp"</span><span class="op">)</span>, engine <span class="op">=</span> <span class="st">"emmeans"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Pairwise comparisons</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; episode |               grp | Contrast |      95% CI |     p</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span>
<span><span class="co">#&gt; 2-2     | control-treatment |     0.06 | -0.41, 0.52 | 0.816</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># comparisons using "ggeffects" backend</span></span>
<span><span class="va">my_pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/predict_response.html">predict_response</a></span><span class="op">(</span><span class="va">model2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"episode [2]"</span>, <span class="st">"grp"</span><span class="op">)</span>, margin <span class="op">=</span> <span class="st">"marginalmeans"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/test_predictions.html">test_predictions</a></span><span class="op">(</span><span class="va">my_pred</span>, engine <span class="op">=</span> <span class="st">"ggeffects"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Pairwise comparisons</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; episode |               grp | Contrast |      95% CI |     p</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span>
<span><span class="co">#&gt; 2-2     | control-treatment |     0.06 | -0.41, 0.52 | 0.816</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="does-difference-between-two-levels-of-episode-in-the-control-group-differ-from-difference-of-same-two-levels-in-the-treatment-group">Does difference between two levels of episode in the control group
differ from difference of same two levels in the treatment group?<a class="anchor" aria-label="anchor" href="#does-difference-between-two-levels-of-episode-in-the-control-group-differ-from-difference-of-same-two-levels-in-the-treatment-group"></a>
</h3>
<p>The <code>test</code> argument also allows us to compare
difference-in-differences. When <code>engine = "emmeans"</code> or
<code>"ggeffects"</code>, we need to set
<code>test = "interaction"</code> to get interaction contrasts,
i.e. differences-in-differences.</p>
<p><img src="introduction_comparisons_4_files/figure-html/unnamed-chunk-11-1.png" width="672"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># specifying the difference-in-difference when using "marginaleffects"</span></span>
<span><span class="fu"><a href="../reference/test_predictions.html">test_predictions</a></span><span class="op">(</span><span class="va">model2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"episode"</span>, <span class="st">"grp"</span><span class="op">)</span>, test <span class="op">=</span> <span class="st">"(b1 - b3) = (b2 </span></span>
<span><span class="st">- b4)"</span>, margin <span class="op">=</span> <span class="st">"marginalmeans"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Hypothesis      | Contrast |      95% CI |     p</span></span>
<span><span class="co">#&gt; ------------------------------------------------</span></span>
<span><span class="co">#&gt; (b1-b3)=(b2-b4) |     0.36 | -0.29, 1.02 | 0.277</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Tested hypothesis: (episode[1],grp[control] - episode[2],grp[control]) = (episode[1],grp[treatment] - episode[2],grp[treatment])</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># "emmeans" provides similar comparisons when we set test = "interaction".</span></span>
<span><span class="co"># This displays *all* possible differences-in-differences. The first row in</span></span>
<span><span class="co"># this output is identical to the above result from "marginaleffects". The</span></span>
<span><span class="co"># "emmeans" package is used automatically, when test = "interaction".</span></span>
<span><span class="fu"><a href="../reference/test_predictions.html">test_predictions</a></span><span class="op">(</span><span class="va">model2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"episode"</span>, <span class="st">"grp"</span><span class="op">)</span>, test <span class="op">=</span> <span class="st">"interaction"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Interaction contrasts</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; episode |                   grp | Contrast |      95% CI |     p</span></span>
<span><span class="co">#&gt; ----------------------------------------------------------------</span></span>
<span><span class="co">#&gt; 1-2     | control and treatment |     0.36 | -0.29, 1.02 | 0.277</span></span>
<span><span class="co">#&gt; 1-3     | control and treatment |     0.37 | -0.27, 1.00 | 0.254</span></span>
<span><span class="co">#&gt; 2-3     | control and treatment |     0.01 | -0.64, 0.65 | 0.988</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># using "ggeffects", we also need to set test = "interaction" to get the same</span></span>
<span><span class="co"># results. However, since by default "emmeans" us used, we also need to specify</span></span>
<span><span class="co"># the "engine" argument</span></span>
<span><span class="va">my_pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/predict_response.html">predict_response</a></span><span class="op">(</span><span class="va">model2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"episode"</span>, <span class="st">"grp"</span><span class="op">)</span>, margin <span class="op">=</span> <span class="st">"marginalmeans"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/test_predictions.html">test_predictions</a></span><span class="op">(</span><span class="va">my_pred</span>, test <span class="op">=</span> <span class="st">"interaction"</span>, engine <span class="op">=</span> <span class="st">"ggeffects"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Interaction contrasts</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; episode |                   grp | Contrast |      95% CI |     p</span></span>
<span><span class="co">#&gt; ----------------------------------------------------------------</span></span>
<span><span class="co">#&gt; 1-2     | control and treatment |     0.36 | -0.29, 1.02 | 0.277</span></span>
<span><span class="co">#&gt; 1-3     | control and treatment |     0.37 | -0.27, 1.00 | 0.254</span></span>
<span><span class="co">#&gt; 2-3     | control and treatment |     0.01 | -0.64, 0.65 | 0.988</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>
    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/strengejacke" class="external-link">Daniel Lüdecke</a>.</p>
</div>
<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.9000.</p>
</div>
    </footer>
</div>
  </body>
</html>
